<div ng-include="'views/partials/search_box.html'"></div>

<div class="row">
  <div class="large-8 push-4 columns">
    <section class="results row">
      <div ng-show="hasResults()">
        <header>
          <h4>Résultats {{ response.results.length }} sur {{ response.hits }}</h4>
        </header>
        <div class="results-list">
          <div ng-repeat="result in response.results" class="result row">
            <div class="large-2 columns">
              <div class="result__material-icon">
                <img src="http://placekitten.com/g/190/190">
              </div>
            </div>
            <div class="large-10 columns">
              <h3 class="result__title"><a href="#/results/{{$index + 1}}">{{ result.ptitle }}</a></h3>
              <div class="result__author">{{ result.author | replace }}</div>
              <div class="result__publisher" ng-show="result.publisher"><span class="field_label">Édition :</span> {{ result.publisher | yearPublisher: result.date }}</div>
              <div class="result__date" ng-show="result.date && !result.publisher"><span class="field_label">Date :</span> {{ result.date | lfYear }}</div>
              <div class="result__subject" ng-show="result.subject"><span class="field_label">Dans :</span> {{ result.subject | replace }}</div>
              <div class="result__collection"><span class="field_label">Résultat de :</span> {{ result.vendor_name }}</div>
            </div>
          </div>
        </div>
        <div class="more_results row">
          <div class="small-3 large-centered columns">
            <a href="" ng-click="showMoreResults()" class="more_results_action" ng-hide="noMoreResults()">Plus de résultats</a>
          </div>
        </div>
      </div>
    </section>
    <div class="row">
      <div class="large-1 large-offset-2 columns">
        <img src="assets/img/ajax-loader.gif" ng-show="loading()" />
      </div>
    </div>
  </div>

  <div class="large-4 pull-8 columns">
    <nav class="facets" ng-controller="FiltersController" ng-show="hasResults()">
      <h4>Filtrer les résultats</h4>
      <a href="" ng-click="resetFilters()" ng-show="filtered()">Enlever les filtres</a>
      <div ng-repeat="facet in facets" class="facet" ng-hide="facet.empty">
        <h4>
          {{ facet.frenchName }}
          <a href="" ng-click="moreFilterValues(facet)">+</a>
          <a href="" ng-click="lessFilterValues(facet)">-</a>
        </h4>
        <ul>
          <li ng-repeat="filter in facet.data | limitTo: facet.limit" class="facet__value">
            <a href="" ng-click="addFilterAndRefresh(facet.name, filter[0])">{{ filter[0] }}</a> ({{ filter[1] }})
          </li>
        </ul>
      </div>
    </nav>
  </div>
</div>
